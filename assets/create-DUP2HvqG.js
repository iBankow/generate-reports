import{u as g,b as h,r as m,j as e}from"./index-B5WOI7hk.js";import{T as v}from"./TemplateEditor-DjgzE7yN.js";import{B as N,C as d}from"./card-76uj9AK6.js";import"./textarea-Bj7t9tXD.js";function C(){const n=g(),{editId:o}=h.useSearch(),[t,u]=m.useState(null),[x,T]=m.useState(!!o);m.useEffect(()=>{if(o){const a=JSON.parse(localStorage.getItem("templates")||"[]").find(r=>r.id===o);a&&u(a),T(!1)}},[o]);const f=(l,a,r,c)=>{try{const s=JSON.parse(localStorage.getItem("templates")||"[]");if(t){const i=s.map(p=>p.id===t.id?{...t,title:l,description:a,markdown:r,fields:c,updatedAt:new Date}:p);localStorage.setItem("templates",JSON.stringify(i)),alert("Template atualizado com sucesso!")}else{const i={id:`template_${Date.now()}`,title:l,description:a,markdown:r,fields:c,createdAt:new Date,updatedAt:new Date};s.unshift(i),localStorage.setItem("templates",JSON.stringify(s)),alert("Template criado com sucesso!")}n({to:"/templates"})}catch(s){console.error("Erro ao salvar template:",s),alert("Erro ao salvar template")}};return e.jsx("div",{className:"min-h-screen p-8 route-container",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsx(N,{variant:"outline",onClick:()=>n({to:"/templates"}),children:"← Voltar para Templates"})}),x?e.jsx(d,{className:"p-12 text-center route-card route-text-muted",children:"Carregando template..."}):e.jsxs(d,{className:"p-6 route-card",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:t?"Editar Template":"Criar Novo Template"}),e.jsx("p",{className:"route-text-muted mb-6",children:t?"Edite os dados do seu template":"Crie um template com campos dinâmicos para seus formulários"}),e.jsx(v,{onSave:f,initialTitle:t?.title,initialDescription:t?.description,initialMarkdown:t?.markdown})]})]})})}export{C as component};
